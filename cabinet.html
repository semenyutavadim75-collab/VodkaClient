<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç - VodkaClient</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

body {
    background: #000000;
    color: #fff;
    min-height: 100vh;
}

/* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
nav {
    position: relative;
    z-index: 100;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 60px;
    background: rgba(10, 10, 10, 0.9);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(40, 40, 40, 0.5);
}

.logo {
    font-size: 24px;
    font-weight: 700;
    letter-spacing: 2px;
    color: #fff;
    text-decoration: none;
}

.btn-back {
    padding: 10px 24px;
    background: linear-gradient(135deg, #1a1a1a, #0a0a0a);
    border: 1px solid rgba(60, 60, 60, 0.5);
    border-radius: 8px;
    color: #fff;
    font-weight: 600;
    cursor: pointer;
    text-decoration: none;
    transition: all 0.3s;
}

.btn-back:hover {
    transform: translateY(-2px);
    background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞–±–∏–Ω–µ—Ç–∞ */
.cabinet-container {
    max-width: 900px;
    margin: 60px auto;
    padding: 0 30px;
}

.cabinet-header {
    text-align: center;
    margin-bottom: 40px;
}

.cabinet-header h1 {
    font-size: 32px;
    margin-bottom: 10px;
}

.cabinet-header p {
    color: rgba(255, 255, 255, 0.6);
    font-size: 18px;
}

/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ */
.info-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-bottom: 30px;
}

.info-row {
    display: flex;
    align-items: center;
    gap: 15px;
}

.info-label {
    min-width: 220px;
    padding: 12px 20px;
    background: linear-gradient(135deg, #2196F3, #1976D2);
    border-radius: 8px;
    color: #fff;
    font-size: 14px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 8px;
}

.info-value {
    flex: 1;
    padding: 12px 20px;
    background: rgba(30, 30, 30, 0.9);
    border: 1px solid rgba(60, 60, 60, 0.5);
    border-radius: 8px;
    color: #fff;
    font-size: 14px;
}

.info-value input {
    width: 100%;
    background: transparent;
    border: none;
    color: #fff;
    font-size: 14px;
    outline: none;
}

.action-btn {
    padding: 10px 20px;
    background: linear-gradient(135deg, #2196F3, #1976D2);
    border: none;
    border-radius: 8px;
    color: #fff;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    white-space: nowrap;
}

.action-btn:hover {
    transform: translateY(-2px);
    background: linear-gradient(135deg, #42A5F5, #2196F3);
}

/* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –≤–Ω–∏–∑—É */
.bottom-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 15px;
    margin-top: 30px;
    flex-wrap: wrap;
}

.left-actions {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
}

.primary-btn {
    padding: 12px 24px;
    background: linear-gradient(135deg, #2196F3, #1976D2);
    border: none;
    border-radius: 8px;
    color: #fff;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.primary-btn:hover {
    transform: translateY(-2px);
    background: linear-gradient(135deg, #42A5F5, #2196F3);
}

/* –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ */
.logout-btn {
    padding: 12px 30px;
    background: linear-gradient(135deg, #2196F3, #1976D2);
    border: none;
    border-radius: 8px;
    color: #fff;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.logout-btn:hover {
    transform: translateY(-2px);
    background: linear-gradient(135deg, #42A5F5, #2196F3);
}

/* –ó–∞–≥—Ä—É–∑–∫–∞ */
.loading {
    text-align: center;
    padding: 100px 20px;
    font-size: 24px;
    color: rgba(255, 255, 255, 0.6);
}
</style>
</head>

<body>

<!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
<nav>
    <a href="/" class="logo">VodkaClient</a>
    <div style="display: flex; gap: 15px;">
        <a href="/admin.html" class="btn-back">üî¥ –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</a>
        <a href="/" class="btn-back">‚Üê –ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</nav>

<!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞–±–∏–Ω–µ—Ç–∞ -->
<div class="cabinet-container">
    <div id="loadingMessage" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    
    <div id="cabinetContent" style="display: none;">
        <div class="cabinet-header">
            <h1>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ -->
        <div class="info-list">
            <div class="info-row">
                <div class="info-label">
                    <span>üë§</span> UID
                </div>
                <div class="info-value" id="uidDisplay">-</div>
            </div>

            <div class="info-row">
                <div class="info-label">
                    <span>üìù</span> –õ–æ–≥–∏–Ω
                </div>
                <div class="info-value" id="loginDisplay">-</div>
            </div>

            <div class="info-row">
                <div class="info-label">
                    <span>üë•</span> –ì—Ä—É–ø–ø–∞
                </div>
                <div class="info-value" id="groupDisplay">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
            </div>

            <div class="info-row">
                <div class="info-label">
                    <span>üìÖ</span> –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
                </div>
                <div class="info-value" id="dateDisplay">-</div>
            </div>

            <div class="info-row">
                <div class="info-label">
                    <span>üïê</span> –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥
                </div>
                <div class="info-value" id="lastLoginDisplay">-</div>
            </div>

            <div class="info-row">
                <div class="info-label">
                    <span>‚úâÔ∏è</span> E-mail
                </div>
                <div class="info-value" id="emailDisplay">-</div>
            </div>

            <div class="info-row">
                <div class="info-label">
                    <span>üíª</span> HWID
                </div>
                <div class="info-value" id="hwidDisplay">-</div>
                <button class="action-btn" id="resetHwidBtn">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
            </div>

            <div class="info-row">
                <div class="info-label">
                    <span>üîë</span> –ö–ª—é—á –∫—É–ø–ª–µ–Ω –¥–æ
                </div>
                <div class="info-value" id="subscriptionDisplay">-</div>
                <button class="action-btn" id="extendBtn">‚è∞ –ü—Ä–æ–¥–ª–∏—Ç—å</button>
            </div>

            <div class="info-row">
                <div class="info-label">
                    <span>üîì</span> –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–ª—é—á–∞
                </div>
                <div class="info-value">
                    <input type="text" id="keyInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á">
                </div>
                <button class="action-btn" id="activateKeyBtn">‚úÖ –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
        </div>

        <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∫–ª—é—á–∞ -->
        <div id="keyMessage" style="margin-bottom: 20px; padding: 12px; border-radius: 8px; display: none;"></div>

        <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –≤–Ω–∏–∑—É -->
        <div class="bottom-actions">
            <div class="left-actions">
                <button class="primary-btn" id="promoBtn">üìã –ú–æ–∏ –ø—Ä–æ–º–æ–∫–æ–¥—ã</button>
                <a href="https://t.me/Attack_T1rov" target="_blank" class="primary-btn">üõí –ö—É–ø–∏—Ç—å/–ø—Ä–æ–¥–ª–∏—Ç—å —Ç–æ–≤–∞—Ä—ã</a>
                <button class="primary-btn" id="downloadClientBtn">üì• –°–∫–∞—á–∞—Ç—å –ª–∞—É–Ω—á–µ—Ä</button>
                <button class="primary-btn" id="changePasswordBtn">üîê –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
            </div>
            <button class="logout-btn" id="logoutBtn">üö™ –í—ã–π—Ç–∏</button>
        </div>
    </div>
</div>

<script>
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
async function loadUserData() {
    try {
        const response = await fetch('/api/check-auth');
        const data = await response.json();
        
        if (!data.authenticated) {
            window.location.href = '/';
            return;
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
        document.getElementById('uidDisplay').textContent = data.uid || '-';
        document.getElementById('loginDisplay').textContent = data.username || '-';
        document.getElementById('emailDisplay').textContent = data.email || '–ù–µ —É–∫–∞–∑–∞–Ω';
        document.getElementById('hwidDisplay').textContent = data.hwid || '–ù–µ –ø—Ä–∏–≤—è–∑–∞–Ω';
        
        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
        if (data.created_at) {
            const date = new Date(data.created_at);
            document.getElementById('dateDisplay').textContent = date.toLocaleDateString('ru-RU', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            }) + ' ' + date.toLocaleTimeString('ru-RU', {
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        // –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥ (–∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –∫–∞–∫ –∑–∞–≥–ª—É—à–∫—É)
        const now = new Date();
        document.getElementById('lastLoginDisplay').textContent = now.toLocaleDateString('ru-RU', {
            day: '2-digit',
            month: '2-digit',
            year: 'numeric'
        }) + ' ' + now.toLocaleTimeString('ru-RU', {
            hour: '2-digit',
            minute: '2-digit'
        });

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏
        if (data.subscription_active && data.subscription_expires) {
            const expiresDate = new Date(data.subscription_expires);
            document.getElementById('subscriptionDisplay').textContent = expiresDate.toLocaleDateString('ru-RU', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            }) + ' ' + expiresDate.toLocaleTimeString('ru-RU', {
                hour: '2-digit',
                minute: '2-digit'
            });
        } else {
            document.getElementById('subscriptionDisplay').textContent = '–ù–µ –∞–∫—Ç–∏–≤–Ω–∞';
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç
        document.getElementById('loadingMessage').style.display = 'none';
        document.getElementById('cabinetContent').style.display = 'block';
        
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
        window.location.href = '/';
    }
}

// –°–±—Ä–æ—Å HWID
document.getElementById('resetHwidBtn').addEventListener('click', async () => {
    if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å HWID?')) return;
    
    try {
        const response = await fetch('/api/reset-hwid', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' }
        });
        
        const data = await response.json();
        alert(data.message || 'HWID —Å–±—Ä–æ—à–µ–Ω');
        
        if (data.success) {
            loadUserData();
        }
    } catch (error) {
        alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±—Ä–æ—Å–µ HWID');
    }
});

// –ü—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
document.getElementById('extendBtn').addEventListener('click', () => {
    window.open('https://t.me/Attack_T1rov', '_blank');
});

// –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–ª—é—á–∞
document.getElementById('activateKeyBtn').addEventListener('click', async () => {
    const keyCode = document.getElementById('keyInput').value.trim();
    const messageDiv = document.getElementById('keyMessage');
    
    if (!keyCode) {
        messageDiv.style.display = 'block';
        messageDiv.style.background = 'rgba(255, 50, 50, 0.2)';
        messageDiv.style.border = '1px solid rgba(255, 50, 50, 0.5)';
        messageDiv.style.color = '#ff5555';
        messageDiv.textContent = '–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á –∞–∫—Ç–∏–≤–∞—Ü–∏–∏';
        return;
    }
    
    try {
        const response = await fetch('/api/activate-key', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ key_code: keyCode })
        });
        
        const data = await response.json();
        
        messageDiv.style.display = 'block';
        
        if (data.success) {
            messageDiv.style.background = 'rgba(50, 255, 50, 0.2)';
            messageDiv.style.border = '1px solid rgba(50, 255, 50, 0.5)';
            messageDiv.style.color = '#55ff55';
            messageDiv.textContent = data.message;
            document.getElementById('keyInput').value = '';
            
            setTimeout(() => {
                loadUserData();
            }, 1000);
        } else {
            messageDiv.style.background = 'rgba(255, 50, 50, 0.2)';
            messageDiv.style.border = '1px solid rgba(255, 50, 50, 0.5)';
            messageDiv.style.color = '#ff5555';
            messageDiv.textContent = data.message;
        }
    } catch (error) {
        messageDiv.style.display = 'block';
        messageDiv.style.background = 'rgba(255, 50, 50, 0.2)';
        messageDiv.style.border = '1px solid rgba(255, 50, 50, 0.5)';
        messageDiv.style.color = '#ff5555';
        messageDiv.textContent = '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è';
    }
});

// –ú–æ–∏ –ø—Ä–æ–º–æ–∫–æ–¥—ã
document.getElementById('promoBtn').addEventListener('click', () => {
    alert('–§—É–Ω–∫—Ü–∏—è "–ú–æ–∏ –ø—Ä–æ–º–æ–∫–æ–¥—ã" –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
});

// –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
document.getElementById('downloadClientBtn').addEventListener('click', () => {
    const loaderUrl = 'https://www.dropbox.com/scl/fi/2zbuk1s0opsmjl21zrsd3/VodkaClient.exe?rlkey=vt6dzy7evnbxr8rosnidyyaio&st=caeou3b8&dl=1';
    window.open(loaderUrl, '_blank');
});

// –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è
document.getElementById('changePasswordBtn').addEventListener('click', () => {
    alert('–§—É–Ω–∫—Ü–∏—è "–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å" –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
});

// –í—ã—Ö–æ–¥
document.getElementById('logoutBtn').addEventListener('click', async () => {
    try {
        await fetch('/api/logout', { method: 'POST' });
        window.location.href = '/';
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞');
    }
});

// –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
loadUserData();
</script>

</body>
</html>
